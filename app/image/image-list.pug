extends ../layout/layout

block head-opt
  meta(property='og:image', content=images.length ? images[0].thumb : '')
  title #{appName}

block header

block content

  script.
    $(function() {
      cimage.initList();
    });

  .section.page-title
    h1
      a(href='/') #{appName}

  if !gt
    .section
      .sub-section.top-links
        if locals.user
          a(href='/images/new') Upload
          //- a(href='/users/' + user.id) My Photos
          //- user.home 에 '/' 문자 있는 경우도 있으므로 미리 URI 인코딩한다.
          a(href='/' + encodeURIComponent(user.home)) My Photos
          a(href='/users') Users
          a(href='#' onclick='javascript:cuser.logout(); return false;') Logout
        else
          a(href='/users/login') Login
          a(href='/users/register') Register
          a(href='/users') Users

      .sub-section.news
        for banner in banners
          a(href=banner.url, target="_blank") #{banner.text}
          br

  .section.image-thumb-list
    for image in images
      .image-thumb
        .image
          a(href='/images/' + image.id)
            img(src=image.thumb, data-vers= image.vers ? image.vers.join(','): null)
        - var c = image.comment.split(/\r\n|\n/, 1)[0];
        if c
          .comment= c
        .uname
          //- user.home 에 '/' 문자 있는 경우도 있으므로 미리 URI 인코딩한다.
          a(href='/' + encodeURIComponent(image.user.home)) #{image.user.name}

  .section
    if next
      .mini-section
        a(href=next) Next
    if prev
      .mini-section
        a(href=prev) Previous

  .section.top-links
    //-if appNamel != 'raysoda'
    a(href='https://raysoda.com') RaySoda
    //-if appNamel != 'rapixel'
    a(href='https://rapixel.com') Rapixel
    //-if appNamel != 'osoky'
    a(href='https://osoky.com') Osoky
